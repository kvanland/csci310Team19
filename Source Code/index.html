<!Doctype html>
<html>

<head>
<link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link href="https://code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.min.css" rel="stylesheet" type="text/css" />


<title> Cumulyrics </title>
</head>

<body>

  <script src="https://www.gstatic.com/firebasejs/3.6.10/firebase.js"></script>
  
  <script>
    // Initialize Firebase
    var config = {
      apiKey: "AIzaSyACKaQ-DLVWmYxxu9ekzA4LMonRyN1niVQ",
      authDomain: "cumulyrics.firebaseapp.com",
      databaseURL: "https://cumulyrics.firebaseio.com",
      storageBucket: "cumulyrics.appspot.com",
      messagingSenderId: "163759277958"
    };
    firebase.initializeApp(config);

  </script>

  <script>
      window.fbAsyncInit = function() {
      FB.init({
        appId      : '1763484507313644',
        xfbml      : true,
        version    : 'v2.8'
      });
      FB.AppEvents.logPageView();
      };

      (function(d, s, id){
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {return;}
        js = d.createElement(s); js.id = id;
        js.src = "https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.8&appId=1763484507313644";
        fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));


  </script>

  <link rel = "stylesheet" href = "frontEnd/styles.css">
  <div id = "titlebar">
    <h1> 
      <button id = "back" onclick = backAction()> Back </button> 
      Cumulyrics
      <button id = "home" onclick = homeAction()> <i class=material-icons "md-48">home</i> </button> 
    </h1>

  </div>
  <br><br><br><br>
  <div id = "WordCloud">
    <svg id = "wCCanvas" width = "100%" height = "0">
      
    </svg>
    <form id = "colorButtons" onchange = colorToggle()>
      <input type = "radio"  name = "Color" id="blackAndWhite" value = "Black and White"> Black and White </input> 
      <input type = "radio" name = "Color" id = "color" value = "Colorful" checked> Colorful </input>
    </form>

  </div>


  <div id = "SongList" >
    <svg id = "songListCanvas" width = "100%" height = "0">
    </svg>

  </div>


  <div id = "Lyrics">
    <svg id = "lyricsCanvas" width = "100%" height = "0">
    </svg>
  </div>


  
  <div id = "Search">
    <input id = "searchBar" type = "text" list="autoList" onchange= userTypes()></input>
    <br></br>
    <button id = "searchButton" class = "purpleButton" onclick = searchAction()> Search </button>
    <button id = "shareButton"> Share to Facebook</button>
    <button id = "mergeButton" class = "purpleButton"> Add to Cloud </button>
  </div>

  <script src= "frontEnd/lib/d3/d3.js" charset="utf-8"></script>
  <script src= "frontEnd/lib/d3/d3.layout.cloud.js"></script>
  <script src= "frontEnd/d3.wordcloud.js"></script>
  <script src= "frontEnd/example.words.js"></script>
  <script src= "https://code.jquery.com/jquery-1.11.0.min.js"></script>
  <script src= "https://code.jquery.com/ui/1.10.4/jquery-ui.min.js"></script>
  <script src= "frontEnd/javascript.js"> </script> 



  <script>

  document.getElementById('shareButton').onclick = function() {

   // Points to the root reference
   var tempRef = firebase.storage().ref().child('images/upload.jpg');

   var s = new XMLSerializer().serializeToString(document.getElementById("wCCanvas"))


var img = window.btoa(s);
console.log(img);

   // Upload file and metadata to the object 'images/mountains.jpg'
   var uploadTask = tempRef.putString(img, 'base64');

 uploadTask.on('state_changed', function(snapshot) { },
   function(error) {
     // Handle unsuccessful uploads
   }, function() {
     // Handle successful uploads on complete
     // For instance, get the download URL: https://firebasestorage.googleapis.com/...
     var downloadURL = uploadTask.snapshot.downloadURL;
     FB.ui({
       method: 'share',
       href: downloadURL,
       caption: 'test photo upload',
     }, function(response){});
   });
}

/*
  document.getElementById('shareButton').onclick = function() {
    FB.ui({
    method: 'share',
    href: 'https://www.photographyblogger.net/wp-content/uploads/2010/05/flower29.jpg',
    caption: 'test photo upload',
    }, function(response){});
  }
  */
  </script>

<body>

</html>
